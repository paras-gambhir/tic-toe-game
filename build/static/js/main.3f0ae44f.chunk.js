(this["webpackJsonpreact-tic-tac-toe"]=this["webpackJsonpreact-tic-tac-toe"]||[]).push([[0],{49:function(e,t,a){e.exports=a.p+"static/media/logo.ef02fd95.png"},53:function(e,t,a){e.exports=a(97)},58:function(e,t,a){},88:function(e,t){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(47),o=a.n(s),i=(a(58),a(12)),c=a(1),l=a(48),u=a(13),m=a(14),h=a(17),d=a(16),p=function(e){var t=e.type,a=e.choice,n=e.label,s=e.onChoice;return r.a.createElement("div",{className:"btn btn-".concat(t),onClick:s.bind(void 0,a)},n)},f=function(e){var t=e.logo,a=e.onChoice;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"choice-container"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:t,alt:"React TicTacToe"})),r.a.createElement(p,{onChoice:a,type:"primary",choice:"new",label:"Start New"}),r.a.createElement(p,{onChoice:a,type:"secondary",choice:"join",label:"Join Game"})))},v=function(e){var t=e.name,a=e.placeholder,n=e.value,s=e.onChange;return r.a.createElement("input",{autoComplete:"off",type:"text",name:t,id:t,placeholder:a,value:n,onChange:s})},g=function(e){var t=e.stepBack,a=e.onSubmit,n=e.onTyping,s=e.newGame,o=e.name,i=e.room;return s?r.a.createElement("div",{className:"input-container"},r.a.createElement(v,{name:"name",placeholder:"Your Name...",onChange:n,value:o}),r.a.createElement("div",{className:"nav-container"},r.a.createElement(p,{type:"nav-back",choice:"back",onChoice:t,label:"Back"}),r.a.createElement(p,{type:"nav-forward",choice:"submit",onChoice:a,label:"Let's Go"}))):r.a.createElement("div",{className:"input-container"},r.a.createElement(v,{name:"name",placeholder:"Your Name...",onChange:n,value:o}),r.a.createElement(v,{name:"room",placeholder:"Room ID...",onChange:n,value:i}),r.a.createElement("div",{className:"nav-container"},r.a.createElement(p,{type:"nav-back",choice:"back",onChoice:t,label:"Back"}),r.a.createElement(p,{type:"nav-forward",choice:"submit",onChoice:a,label:"Let's Go"})))},y=function(e){var t=e.loading;return r.a.createElement("div",{className:"loader",style:{display:t?"flex":"none"}},r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-4x fa-fw"}),r.a.createElement("span",{style:{userSelect:"none"}},"Loading..."))},E=function(e){var t=e.display,a=e.message;return r.a.createElement("div",{className:"error",style:{opacity:t?"100%":"0"}},r.a.createElement("h1",{className:"error-message"},a))},k=a(49),b=a.n(k),w=a(15),S=a.n(w),C=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChoice=function(e){var t={newGame:"new"===e};n.setState(t,(function(){n.stepForward()}))},n.validate=function(){return n.state.newGame?!(""===n.state.name):!(""===n.state.name)&&!(""===n.state.room)},n.onSubmit=function(){n.setState({loading:!0}),n.validate()?n.state.newGame?n.socket.emit("newGame"):n.socket.emit("joining",{room:n.state.room}):(setTimeout((function(){return n.setState({loading:!1})}),500),n.displayError(n.state.newGame?"Please fill out your name":"Please fill out your name and room id"))},n.stepBack=function(){n.setState({step:n.state.step-1})},n.stepForward=function(){n.setState({step:n.state.step+1})},n.onTyping=function(e){var t=e.target.name,a=Object(l.a)({},t,e.target.value);n.setState(a)},n.displayError=function(e){n.setState({error:!0,errorMessage:e,loading:!1}),setTimeout((function(){n.setState({error:!1,errorMessage:""})}),3e3)},n.state={step:1,name:"",newGame:null,room:"",loading:!1,serverConfirmed:!1,error:!1,errorMessage:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=S()("https://tiktok-game.azurewebsites.net/"),this.socket.on("newGameCreated",(function(t){e.setState({serverConfirmed:!0,room:t})})),this.socket.on("joinConfirmed",(function(){e.setState({serverConfirmed:!0})})),this.socket.on("errorMessage",(function(t){return e.displayError(t)}))}},{key:"componentWillUnmount",value:function(){this.socket.disconnect()}},{key:"render",value:function(){if(this.state.serverConfirmed)return r.a.createElement(c.a,{to:"/game?room=".concat(this.state.room,"&name=").concat(this.state.name)});switch(this.state.step){case 1:return r.a.createElement(f,{logo:b.a,onChoice:this.onChoice});case 2:return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{loading:this.state.loading}),r.a.createElement(E,{display:this.state.error,message:this.state.errorMessage}),r.a.createElement(g,{stepBack:this.stepBack,onSubmit:this.onSubmit,onTyping:this.onTyping.bind(this),newGame:this.state.newGame,name:this.state.name,room:this.state.room}));default:return null}}}]),a}(r.a.Component),N=a(52),P={background:"white",width:"93%",height:"13%",position:"absolute",transform:"rotate(45deg)"},j={background:"white",width:"93%",height:"13%",position:"absolute",transform:"rotate(-45deg)"},M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"before",style:P}),r.a.createElement("div",{className:"after",style:j}))},T={background:"white",width:"90%",height:"90%",position:"absolute",borderRadius:"50%"},B={background:"var(--dark-blue)",width:"70%",height:"70%",position:"absolute",borderRadius:"50%"},G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"before",style:T}),r.a.createElement("div",{className:"after",style:B}))},O=function(e){switch(e.value){case"X":return r.a.createElement(M,null);case"O":return r.a.createElement(G,null);default:if(e.end||!e.turn)return r.a.createElement("div",null);switch(e.player){case"X":return r.a.createElement("div",{className:"placeHolder"},r.a.createElement(M,null));case"O":return r.a.createElement("div",{className:"placeHolder"},r.a.createElement(G,null));default:return r.a.createElement("div",null)}}},R=function(e){return r.a.createElement("div",{className:"square",onClick:e.onClick.bind(void 0,e.id)},r.a.createElement(O,e))},x=function(e){var t=e.room,a=e.display,s=Object(n.useRef)(null);return r.a.createElement("div",{className:"wait",style:{display:a?"flex":"none"}},r.a.createElement("h1",{className:"wait-message"},"Waiting for player to connect..."),r.a.createElement("div",{className:"copy"},r.a.createElement("h1",{className:"copy-message"},"Give your friend the following room id to connect"),r.a.createElement("div",{className:"copy-container"},r.a.createElement("input",{ref:s,readOnly:!0,value:t,className:"copy-area"}),r.a.createElement("button",{className:"copy-button",onClick:function(){s.current.select(),document.execCommand("copy")}},"Copy"))))};function D(e){var t=e.message;return r.a.createElement("div",{className:"status"},r.a.createElement("h1",{className:"status-message"},t))}function F(e){var t=e.name,a=e.score;return r.a.createElement("div",{className:"score-container"},r.a.createElement("h1",{className:"name"},t),r.a.createElement("h1",{className:"score"},a))}function q(e){var t=e.data;return r.a.createElement("div",{className:"score-board"},r.a.createElement("h1",{className:"score-title"},"Score Board"),r.a.createElement(F,{name:t.player1[0],score:t.player1[1]}),r.a.createElement(F,{name:t.player2[0],score:t.player2[1]}))}function A(e){var t=e.end,a=e.onClick;return r.a.createElement("div",{className:"again-container"},r.a.createElement("button",{className:"again-button",onClick:a,style:{visibility:t?"visible":"hidden",opacity:t?"1":"0"}},"Play Again"))}var I=a(51),W=a.n(I),Y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(e){var t=n.state,a=t.game,r=t.piece,s=t.end,o=t.turn,i=t.room;a[e]||s||!o||n.socket.emit("move",{room:i,piece:r,index:e})},n.playAgainRequest=function(){n.socket.emit("playAgainRequest",n.state.room)},n.state={game:new Array(9).fill(null),piece:"X",turn:!0,end:!1,room:"",statusMessage:"",currentPlayerScore:0,opponentPlayer:[],waiting:!1,joinError:!1},n.socketID=null,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=S()("https://tiktok-game.azurewebsites.net/");var t=W.a.parse(window.location.search,{ignoreQueryPrefix:!0}),a=t.room,n=t.name;this.setState({room:a}),this.socket.emit("newRoomJoin",{room:a,name:n}),this.socket.on("waiting",(function(){return e.setState({waiting:!0,currentPlayerScore:0,opponentPlayer:[]})})),this.socket.on("starting",(function(t){var a=t.gameState,n=t.players,r=t.turn;e.setState({waiting:!1}),e.gameStart(a,n,r)})),this.socket.on("joinError",(function(){return e.setState({joinError:!0})})),this.socket.on("pieceAssignment",(function(t){var a=t.piece,n=t.id;e.setState({piece:a}),e.socketID=n})),this.socket.on("update",(function(t){var a=t.gameState,n=t.turn;return e.handleUpdate(a,n)})),this.socket.on("winner",(function(t){var a=t.gameState,n=t.id;return e.handleWin(n,a)})),this.socket.on("draw",(function(t){var a=t.gameState;return e.handleDraw(a)})),this.socket.on("restart",(function(t){var a=t.gameState,n=t.turn;return e.handleRestart(a,n)}))}},{key:"gameStart",value:function(e,t,a){var n=this,r=t.filter((function(e){var t=Object(N.a)(e,2),a=t[0];t[1];return a!==n.socketID}))[0][1];this.setState({opponentPlayer:[r,0],end:!1}),this.setBoard(e),this.setTurn(a),this.setMessage()}},{key:"handleUpdate",value:function(e,t){this.setBoard(e),this.setTurn(t),this.setMessage()}},{key:"handleWin",value:function(e,t){if(this.setBoard(t),this.socketID===e){var a=this.state.currentPlayerScore+1;this.setState({currentPlayerScore:a,statusMessage:"You Win"})}else{var n=this.state.opponentPlayer[1]+1,r=this.state.opponentPlayer;r[1]=n,this.setState({opponentPlayer:r,statusMessage:"".concat(this.state.opponentPlayer[0]," Wins")})}this.setState({end:!0})}},{key:"handleDraw",value:function(e){this.setBoard(e),this.setState({end:!0,statusMessage:"Draw"})}},{key:"handleRestart",value:function(e,t){this.setBoard(e),this.setTurn(t),this.setMessage(),this.setState({end:!1})}},{key:"setMessage",value:function(){var e=this.state.turn?"Your Turn":"".concat(this.state.opponentPlayer[0],"'s Turn");this.setState({statusMessage:e})}},{key:"setTurn",value:function(e){this.state.piece===e?this.setState({turn:!0}):this.setState({turn:!1})}},{key:"setBoard",value:function(e){this.setState({game:e})}},{key:"renderSquare",value:function(e){return r.a.createElement(R,{key:e,value:this.state.game[e],player:this.state.piece,end:this.state.end,id:e,onClick:this.handleClick,turn:this.state.turn})}},{key:"render",value:function(){if(this.state.joinError)return r.a.createElement(c.a,{to:"/"});for(var e=[],t=0;t<9;t++){var a=this.renderSquare(t);e.push(a)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{display:this.state.waiting,room:this.state.room}),r.a.createElement(D,{message:this.state.statusMessage}),r.a.createElement("div",{className:"board"},e),r.a.createElement(q,{data:{player1:["You",this.state.currentPlayerScore],player2:[this.state.opponentPlayer[0],this.state.opponentPlayer[1]]}}),r.a.createElement(A,{end:this.state.end,onClick:this.playAgainRequest}))}}]),a}(n.Component),J=function(){return r.a.createElement(i.a,null,r.a.createElement(c.b,{path:"/",exact:!0,component:C}),r.a.createElement(c.b,{path:"/game",component:Y}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.3f0ae44f.chunk.js.map